!function(t){"use strict";const e=()=>{const e=t.select("svg");return{width:+e.attr("width"),height:+e.attr("height")}},r=(t,e)=>{const{colorValues:r,colorLabels:a,labelRectSize:s,labelSpacing:o,labelTextOffset:l,onColorClick:n,selectedColorValue:i,selectedConstituency:p}=e;t.selectAll(".tick").remove();const d=t.selectAll(".tick").data(r);d.exit().remove();const c=d.enter().append("g").attr("class","tick");c.merge(d).attr("transform",(t,e)=>`translate(0, ${e*o})`).attr("opacity",t=>!i||t===i||p?1:.2).on("click",t=>n(t===i?null:t)),c.append("rect").merge(d.select("rect")).attr("fill",(t,e)=>r[e]).attr("width",s).attr("height",s),c.append("text").merge(d.select("text")).text((t,e)=>a[e]).attr("dy","1.2em").attr("x",l)},a=(r,a)=>{console.log("choroplethMap called");const{longitude:s,latitude:o,scale:l,features:n,colorScale:i,selectedColorValue:p,onConstituencyClick:d,selectedConstituency:c,div:u,partyMap:h,selectedFeature:y}=a,g=r.selectAll("path").data(n,t=>t.properties.ASM_NAME),m=((r,a,s)=>{const o=t.geoMercator().scale(s).center([r,a]).translate([e().width/2,e().height/2]);return t.geoPath().projection(o)})(s,o,l),A=g.enter().append("path").attr("class","constituency").attr("d",m);"Top parties"===y?A.merge(g).attr("fill",t=>((t,e,r,a)=>{let s;return null===t.properties.Party||""===t.properties.Party?s="black":r===t.properties.ASM_NAME?s="yellow":a.hasOwnProperty(t.properties.Party)?(console.log(t.properties.Party),s=e(t.properties.Party)):s=e("Others"),s})(t,i,c,h)).attr("opacity",t=>((t,e,r,a,s)=>{let o;return r?r!=a("Others")?o=s.hasOwnProperty(t.properties.Party)&&r==a(t.properties.Party)?1:.2:(o=s.hasOwnProperty(t.properties.Party)?.2:1,""===t.properties.Party&&(o=.2)):o=1,o})(t,0,p,i,h)).classed("highlighted",t=>p&&p===i(t.properties.Party)).on("click",t=>d(t.properties.ASM_NAME===c?null:t.properties.ASM_NAME)).on("mouseover",t=>{u.transition().duration(300).style("opacity",.7),u.html("<p><strong>"+t.properties.ASM_NAME+"</strong></p><table><tbody><tr><td class='wide'>MLA:</td><td>"+t.properties.Candidate+"</td></tr><tr><td>Party:</td><td>"+t.properties.Party+"</td></tr></td></tr></tbody></table>").style("left",event.pageX+"px").style("top",event.pageY-30+"px")}).on("mouseout",function(){u.transition().duration(300).style("opacity",0)}):"Assets"===y?A.merge(g).attr("fill",t=>((t,e,r)=>{let a;return a=t.properties.Assets_num?r===t.properties.ASM_NAME?"yellow":e(t.properties.Assets_num):"black"})(t,i,c)).attr("opacity",t=>((t,e,r,a)=>{let s;return r?(s=r!=a(t.properties.Assets_num)?.2:1,null===t.properties.Assets_num&&(s=.2)):s=1,s})(t,0,p,i)).classed("highlighted",t=>p&&p===i(t.properties.Assets_num)).on("click",t=>d(t.properties.ASM_NAME===c?null:t.properties.ASM_NAME)).on("mouseover",e=>{u.transition().duration(300).style("opacity",.7),u.html("<p><strong>"+e.properties.ASM_NAME+"</strong></p><table><tbody><tr><td class='wide'>MLA:</td><td>"+e.properties.Candidate+"</td></tr><tr><td>Assets:</td><td>â‚¹"+t.format(",.2r")(e.properties.Assets_num)+"</td></tr><tr><td>Party:</td><td>"+e.properties.Party+"</td></tr></td></tr></tbody></table>").style("left",event.pageX+"px").style("top",event.pageY-30+"px")}).on("mouseout",function(){u.transition().duration(300).style("opacity",0)}):"Criminal Case(s)"===y?A.merge(g).attr("fill",t=>((t,e,r)=>{let a;return a=null===t.properties.Criminal_C?"black":r===t.properties.ASM_NAME?"yellow":e(t.properties.Criminal_C)})(t,i,c)).attr("opacity",t=>((t,e,r,a)=>{let s;return r?(s=r!=a(t.properties.Criminal_C)?.2:1,null===t.properties.Criminal_C&&(s=.2)):s=1,s})(t,0,p,i)).classed("highlighted",t=>p&&p===i(t.properties.Criminal_C)).on("click",t=>d(t.properties.ASM_NAME===c?null:t.properties.ASM_NAME)).on("mouseover",t=>{u.transition().duration(300).style("opacity",.7),u.html("<p><strong>"+t.properties.ASM_NAME+"</strong></p><table><tbody><tr><td class='wide'>MLA:</td><td>"+t.properties.Candidate+"</td></tr><tr><td>Criminal case(s):</td><td>"+t.properties.Criminal_C+"</td></tr><tr><td>Party:</td><td>"+t.properties.Party+"</td></tr></td></tr></tbody></table>").style("left",event.pageX+"px").style("top",event.pageY-30+"px")}).on("mouseout",function(){u.transition().duration(300).style("opacity",0)}):"Education"===y&&A.merge(g).attr("fill",t=>((t,e,r)=>{let a;return a=null===t.properties.Criminal_C?"black":r===t.properties.ASM_NAME?"yellow":e(t.properties.edu)})(t,i,c)).attr("opacity",t=>((t,e,r,a)=>{let s;return r?(s=r!=a(t.properties.edu)?.2:1,0===t.properties.edu&&(s=.2)):s=1,s})(t,0,p,i)).classed("highlighted",t=>p&&p===i(t.properties.edu)).on("click",t=>d(t.properties.ASM_NAME===c?null:t.properties.ASM_NAME)).on("mouseover",t=>{u.transition().duration(300).style("opacity",.7),u.html("<p><strong>"+t.properties.ASM_NAME+"</strong></p><table><tbody><tr><td class='wide'>MLA:</td><td>"+t.properties.Candidate+"</td></tr><tr><td>Education:</td><td>"+t.properties.Education+"</td></tr><tr><td>Party:</td><td>"+t.properties.Party+"</td></tr></td></tr></tbody></table>").style("left",event.pageX+"px").style("top",event.pageY-30+"px")}).on("mouseout",function(){u.transition().duration(300).style("opacity",0)})},s=(e,r)=>{const{selectedConstituency:a,selectedColorValue:s,features:o,colorValues:l,colorLabels:n,selectedFeature:i}=r,p=((e,r,a,s,o,l)=>{if(!e&&!r)return["Click on legend bar or Map"];if(e){const r=a.filter(t=>t.properties.ASM_NAME===e),s=r[0].properties.ASM_NAME,o=null===r[0].properties.Candidate?"No data":r[0].properties.Candidate,l=null===r[0].properties.Party?"No data":r[0].properties.Party,n=null===r[0].properties.Education?"No data":r[0].properties.Education,i=null===r[0].properties.Criminal_C?"No data":r[0].properties.Criminal_C,p=r[0].properties.Assets_num?r[0].properties.Assets_num:"No data";return["Constituency: "+s,"MLA: "+o,"Assets(Rs.): "+t.format(",.2r")(p),"Criminal case(s): "+i,"Education: "+n,"Party: "+l]}if(r){const t=s.indexOf(r);return"Assets"===l?[`MLA(s) with assets:  ${o[t]}`]:"Criminal Case(s)"===l?[`MLAs with ${o[t]} criminal case(s)`]:"Education"===l?[`MLAs with education:  ${o[t]}`]:"Top parties"===l?[`Constituencies won by: ${o[t]}`]:["This should not be displayed"]}})(a,s,o,l,n,i);e.selectAll("tspan").remove(),e.selectAll("tspan").data(p).enter().append("tspan").attr("x","0").attr("dy","1.5rem").text(t=>t)};let o,l,n,i,p,d,c,u="Assets";let h,y,g,m,A,C,f,M;const b=(t,e,r,a,s,o)=>{M=((t,e,r,a,s,o)=>{const l=e.reduce(function(t,e){return t.length>e.length?t:e});return{width:r+a+5*(o.length>l.length?o:l).length+a,height:s*(t.length+2)}})(t,e,r,a,s,o),(g=E.selectAll(".colorLegend").data([o])).exit().remove(),g=g.enter().append("g").merge(g).attr("class","colorLegend").attr("transform",`translate(10, ${P-M.height})`),(C=g.selectAll("rect").data([o])).exit().remove(),C.enter().append("rect").merge(C).attr("x",-r).attr("y",-r).attr("width",M.width).attr("height",M.height).attr("fill","red").attr("rx",r).attr("stroke","black").attr("stroke-width",1).attr("opacity",.3),(m=g.selectAll(".legendTitle").data([o])).exit().remove();const l=m.enter().append("g").merge(m).attr("class","legendTitle").selectAll("text").data([o]);l.enter().append("text").merge(l).text(o),(A=g.selectAll(".legendBody").data([o])).exit().remove(),f=A.enter().append("g").attr("transform",`translate(0, ${s/2})`).attr("class","legendBody").merge(A)};t.select("#menus").call((t,e)=>{const{options:r,onOptionClicked:a}=e;let s=t.selectAll("select").data([null]);const o=(s=s.enter().append("select").merge(s).on("change",function(){a(this.value)})).selectAll("option").data(r);o.enter().append("option").merge(o).attr("value",t=>t).text(t=>t)},{options:["Assets","Criminal Case(s)","Education","Top parties"],onOptionClicked:t=>{n=null,o=null,u=t,O(),V()}});const _=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),E=t.select("svg"),P=E.attr("height"),v=E.attr("width"),x=E.append("g"),w=E.append("g").attr("transform",`translate(${v-370-15},20)`),k=w.selectAll("rect").data([null]);k.enter().append("rect").merge(k).attr("width",370).attr("height",170).attr("fill","red").attr("stroke","black").attr("stroke-width",1).attr("rx",10).attr("opacity",.3);const N=w.selectAll("text").data([null]),S=N.enter().append("text").attr("class","infoText").attr("transform","translate(10,5)").merge(N);E.append("rect").attr("x",0).attr("y",0).attr("height",e().height).attr("width",e().width).style("stroke","black").style("fill","none").style("stroke-width",1);E.call(t.zoom().on("zoom",()=>{x.attr("transform",t.event.transform),_.attr("transform",t.event.transform)}));const O=()=>{"Top parties"===u?(p=["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],d=i=["BJP","INC","Jannayak Janta Party","IND","Others"],(c=t.scaleOrdinal()).domain(i).range(p),b(p,d,30,40,30,h="Top parties")):"Assets"===u?(c=t.scaleThreshold(),i=[1e7,2e8,5e8,1e9],p=["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],d=["< 1 Crore","1 - 20 Cr.","20 - 50 Cr.","50 - 100 Cr.","> 100 Cr."],c.domain(i).range(p),p.reverse(),d.reverse(),b(p,d,30,40,30,h="Assets(Rs.)")):"Criminal Case(s)"===u?(i=[1,3,9],p=["#edf8e9","#bae4b3","#74c476","#31a354"],d=["None","1 to 2","3 to 8","9 or more"],(c=t.scaleThreshold()).domain(i).range(p),p.reverse(),d.reverse(),b(p,d,30,40,30,h="Criminal Case(s)")):"Education"===u&&(i=[1,2,3,4],p=["#edf8e9","#bae4b3","#74c476","#238b45"],d=["Others","School","Graduate","Post Graduate"],(c=t.scaleOrdinal()).domain(i).range(p),p.reverse(),d.reverse(),b(p,d,30,40,30,h="Education"))},L=t=>{n&&(n=null),o=t,V()},T=t=>{o&&(o=null),n=t,V()};(e=>t.json(e).then(t=>{return t.features}))("https://raw.githubusercontent.com/saurabhp75/haryana_maha/master/data/merged_haryana_2019.json").then(t=>{(t=>{t.forEach(t=>{"Post Graduate"===t.properties.Education?t.properties.edu=4:"Graduate Professional"===t.properties.Education||"Graduate"===t.properties.Education?t.properties.edu=3:"12th Pass"===t.properties.Education||"10th Pass"===t.properties.Education||"8th Pass"===t.properties.Education||"5th Pass"===t.properties.Education?t.properties.edu=2:"Others"===t.properties.Education?t.properties.edu=1:t.properties.edu=0})})(l=t),y=(t=>{let e=t.reduce((t,e)=>{let r=e.properties.Party;return t.hasOwnProperty(r)||(t[r]=0),t[r]++,t},{}),r=[];for(let t in e)r.push([t,e[t]]);r.sort(function(t,e){return e[1]-t[1]}),r=r.slice(0,4);const a={};for(var s=0;s<r.length;++s)a[r[s][0]]=r[s][1];return a})(l),O(),V()});const V=()=>{console.log("render called");x.call(a,{longitude:77.1,latitude:29.3,scale:1e4,features:l,colorScale:c,selectedColorValue:o,onConstituencyClick:T,selectedConstituency:n,div:_,partyMap:y,selectedFeature:u}),f.call(r,{colorValues:p,colorLabels:d,labelRectSize:30,labelSpacing:30,labelTextOffset:40,onColorClick:L,selectedColorValue:o,selectedConstituency:n,selectedFeature:u}),S.call(s,{selectedConstituency:n,selectedColorValue:o,features:l,colorValues:p,colorLabels:d,selectedFeature:u})}}(d3);
//# sourceMappingURL=haryanaBundle.js.map
